# 画像検索・生成機能 - 選択肢とコスト比較

**作成日**: 2026-01-18  
**目的**: 一般Web画像検索と画像生成AIの選択肢を比較し、コストを整理する

---

## 1. 一般Web画像検索の選択肢

### 1.1 Bing Image Search API

#### 概要
- **提供元**: Microsoft Azure
- **重要**: **2025年8月11日に廃止予定** ⚠️
- **代替**: "Grounding with Bing Search" が推奨されているが、画像検索専用ではない

#### コスト（廃止前）
| プラン | 月額料金 | 無料枠 | 有料料金 |
|--------|---------|--------|---------|
| 無料枠 | $0 | 月1,000リクエスト（3 TPS） | - |
| S1 | - | - | $25 / 25,000リクエスト |
| S3 | - | - | $18 / 1,000リクエスト |
| S7 | - | - | $20 / 1,000リクエスト |
| S8 | - | - | $22 / 1,000リクエスト |

#### 特徴
- ✅ 公式API
- ✅ 無料枠あり
- ❌ 2025年8月11日に廃止予定
- ❌ 2023年に価格が大幅に上昇（約3倍）

#### 利用規約
- APIキーが必要
- User-Agent必須
- 利用規約に準拠が必要

#### 推奨度
**❌ 非推奨** - 廃止予定のため、新規実装には不適切

---

### 1.2 Google Custom Search API

#### 概要
- **提供元**: Google
- **正式名称**: Custom Search JSON API / Programmable Search Engine
- **用途**: カスタム検索エンジンを作成して画像検索を実行

#### コスト
| 項目 | 詳細 |
|------|------|
| **無料枠** | 1日100リクエスト |
| **有料料金** | $5 / 1,000リクエスト（無料枠超過分） |
| **最大リクエスト数** | 1日10,000リクエスト（有料時） |

#### 計算例
- **1日200リクエストの場合**: 100無料 + 100有料 = $0.50/日 = **約$15/月**
- **1日1,000リクエストの場合**: 100無料 + 900有料 = $4.50/日 = **約$135/月**
- **1日5,000リクエストの場合**: 100無料 + 4,900有料 = $24.50/日 = **約$735/月**

#### 特徴
- ✅ 公式API
- ✅ 無料枠あり（1日100リクエスト）
- ✅ 安定したサービス
- ✅ Googleの検索品質
- ⚠️ カスタム検索エンジンの設定が必要
- ⚠️ 画像検索専用ではない（Web検索の結果から画像を抽出）

#### 利用規約
- APIキーが必要
- カスタム検索エンジン（CSE）の作成が必要
- 利用規約に準拠が必要

#### 推奨度
**✅ 推奨** - 無料枠が大きく、安定したサービス

---

### 1.3 SerpAPI

#### 概要
- **提供元**: SerpAPI
- **用途**: Google画像検索の結果をスクレイピングして提供
- **特徴**: 公式APIではなく、スクレイピングベース

#### コスト
| プラン | 月額料金 | 月間リクエスト数 | 時間あたりスループット |
|--------|---------|----------------|---------------------|
| **Free** | $0 | 250 | 50 |
| **Starter** | $25 | 1,000 | 200 |
| **Developer** | $75 | 5,000 | 1,000 |
| **Production** | $150 | 15,000 | 3,000 |
| **Big Data** | $275 | 30,000 | 6,000 |
| **Enterprise** | $3,750 | 100,000 | - |

#### Enterprise追加料金
- **Reserved searches**: $2.75 / 1,000リクエスト（コミットメント必要）
- **On-demand searches**: $7.50 / 1,000リクエスト（従量課金）

#### 計算例
- **月1,000リクエスト**: **$25/月**（Starterプラン）
- **月5,000リクエスト**: **$75/月**（Developerプラン）
- **月15,000リクエスト**: **$150/月**（Productionプラン）

#### 特徴
- ✅ Google画像検索の結果を直接取得
- ✅ 無料枠あり（月250リクエスト）
- ✅ Legal US Shield付き（利用規約遵守の保証）
- ⚠️ スクレイピングベース（Googleの仕様変更に弱い）
- ⚠️ 公式APIではない

#### 利用規約
- APIキーが必要
- Legal US Shieldが含まれる（利用規約遵守の保証）

#### 推奨度
**⚠️ 条件付き推奨** - 無料枠は小さいが、Google画像検索の結果を直接取得できる

---

### 1.4 DuckDuckGo画像検索（非公式API）

#### 概要
- **提供元**: 非公式（コミュニティ実装）
- **実装**: スクレイピングベースの非公式ライブラリ
- **利用可能なライブラリ**: Python, Node.js, PHP等

#### コスト
- **完全無料**（APIキー不要）

#### 特徴
- ✅ 完全無料
- ✅ APIキー不要
- ❌ 公式APIではない
- ❌ 安定性が低い（DOM変更に弱い）
- ❌ IPブロックやCAPTCHAのリスク
- ❌ SLAなし
- ❌ ライセンス情報が不明確

#### 利用規約
- 非公式のため、利用規約が不明確
- スクレイピングのため、DuckDuckGoの利用規約に準拠が必要

#### 推奨度
**❌ 非推奨（本番環境）** - プロトタイプや低トラフィック用途のみ

---

### 1.5 Web画像検索のコスト比較表

| サービス | 無料枠 | 有料料金（1,000リクエスト） | 月5,000リクエスト時のコスト | 推奨度 |
|---------|--------|---------------------------|-------------------------|--------|
| **Bing Image Search** | 月1,000 | $18〜$25 | ❌ 2025年8月11日廃止予定 | ❌ |
| **Google Custom Search** | 1日100（月3,000） | $5 | 約$10/月 | ✅ |
| **SerpAPI** | 月250 | $25〜$75（プランによる） | $75/月 | ⚠️ |
| **DuckDuckGo（非公式）** | 無制限 | 無料 | $0 | ❌ |

**注意**: Bing Image Search APIは2025年8月11日に廃止予定のため、新規実装には使用しないこと。

---

## 2. 画像生成AIの選択肢

### 2.1 OpenAI DALL-E

#### 概要
- **提供元**: OpenAI
- **モデル**: DALL-E 2, DALL-E 3, GPT-Image-1等

#### コスト（DALL-E 3）
| 品質/解像度 | 価格/画像 |
|------------|----------|
| Standard (1024×1024) | $0.04 |
| Standard (1024×1536 or 1536×1024) | $0.08 |
| HD (1024×1024) | $0.08 |
| HD (1024×1536 or 1536×1024) | $0.12 |

#### コスト（DALL-E 2）
| 解像度 | 価格/画像 |
|--------|----------|
| 1024×1024 | $0.016 |
| 1024×1536 | $0.018 |
| 1536×1024 | $0.020 |

#### コスト（GPT-Image-1）
| モデル/品質 | Low | Medium | High |
|-----------|-----|--------|------|
| GPT-Image-1 Mini | $0.005〜$0.006 | $0.011〜$0.015 | $0.036〜$0.052 |
| GPT-Image-1 | $0.011 | $0.042〜$0.063 | $0.167〜$0.25 |

#### 計算例
- **月100画像生成（DALL-E 3 Standard 1024×1024）**: 100 × $0.04 = **$4/月**
- **月500画像生成（DALL-E 3 Standard 1024×1024）**: 500 × $0.04 = **$20/月**
- **月1,000画像生成（DALL-E 3 Standard 1024×1024）**: 1,000 × $0.04 = **$40/月**

#### 特徴
- ✅ 高品質な画像生成
- ✅ 安定したAPI
- ✅ レート制限あり（使用量に応じて）
- ⚠️ コストが比較的高い

#### 利用規約
- APIキーが必要
- 利用規約に準拠が必要
- 生成された画像の利用権限あり

#### 推奨度
**✅ 推奨** - 高品質だが、コストを考慮する必要がある

---

### 2.2 Stability AI (Stable Diffusion)

#### 概要
- **提供元**: Stability AI
- **モデル**: SDXL 1.0, Stable Diffusion 3.5等
- **課金方式**: クレジット制（1クレジット ≈ $0.01）

#### コスト
| モデル | 価格/画像 |
|-------|----------|
| SDXL 1.0 | ~$0.009 |
| Stable Diffusion 3.5 Flash | ~$0.025 |
| Stable Diffusion 3.5 Large Turbo | ~$0.04 |
| Stable Diffusion 3.5 Large | ~$0.065 |

#### その他の操作
- **編集/制御機能**: ~$0.05/操作
- **アップスケール（高速）**: ~$0.02
- **アップスケール（高品質）**: ~$0.40〜$0.60

#### 計算例
- **月100画像生成（SDXL 1.0）**: 100 × $0.009 = **$0.90/月**
- **月500画像生成（SDXL 1.0）**: 500 × $0.009 = **$4.50/月**
- **月1,000画像生成（SDXL 1.0）**: 1,000 × $0.009 = **$9/月**

#### 特徴
- ✅ 低コスト
- ✅ 新規ユーザーに無料クレジット（約25クレジット）
- ✅ 複数のモデル選択可能
- ⚠️ 品質はモデルによって異なる

#### 利用規約
- APIキーが必要
- 利用規約に準拠が必要
- 生成された画像の利用権限あり

#### 推奨度
**✅ 推奨** - 低コストで高品質

---

### 2.3 Google Imagen

#### 概要
- **提供元**: Google
- **モデル**: Imagen 3, Imagen 4等
- **提供経路**: Gemini API / Vertex AI

#### コスト
| モデル | 価格/画像 |
|-------|----------|
| Imagen 4 Fast | $0.02 |
| Imagen 3 Fast | $0.02 |
| Imagen 3 | $0.03 |
| Imagen 4 | $0.04 |
| Imagen 4 Ultra | $0.06 |

#### その他の操作
- **編集/カスタマイズ**: $0.04/画像
- **高解像度/アップスケール（2K-4K）**: $0.06/画像

#### 計算例
- **月100画像生成（Imagen 4 Fast）**: 100 × $0.02 = **$2/月**
- **月500画像生成（Imagen 4 Fast）**: 500 × $0.02 = **$10/月**
- **月1,000画像生成（Imagen 4 Fast）**: 1,000 × $0.02 = **$20/月**

#### 特徴
- ✅ Googleの品質
- ✅ 複数のモデル選択可能
- ✅ 低レイテンシ（Fastモデル）
- ⚠️ 比較的新しいサービス

#### 利用規約
- APIキーが必要
- Google Cloudアカウントが必要（Vertex AI経由の場合）
- 利用規約に準拠が必要

#### 推奨度
**✅ 推奨** - 低コストで高品質、Googleの信頼性

---

### 2.4 Replicate

#### 概要
- **提供元**: Replicate
- **特徴**: 複数の画像生成モデルをプラットフォームとして提供
- **課金方式**: 従量課金（モデルによって異なる）

#### コスト（主要モデル）
| モデル | 価格/画像 |
|-------|----------|
| black-forest-labs/flux-dev | $0.025 |
| black-forest-labs/flux-1.1-pro | $0.04 |
| sideogram-ai/ideogram-v3-quality | $0.09 |

#### ハードウェア料金（時間ベース）
| ハードウェア | 価格/秒 | 価格/時間 |
|------------|--------|----------|
| CPU-Small | $0.000025 | $0.09 |
| CPU 4-core | $0.000100 | $0.36 |
| GPU – Nvidia A100 | $0.001400 | $5.04 |
| GPU – Nvidia H100 | $0.001525 | $5.49 |

#### 注意点
- **隠れたコスト**: コールドスタート、セットアップ時間、アイドル時間等により、実際のコストが**10倍**になる可能性がある

#### 特徴
- ✅ 複数のモデル選択可能
- ✅ 柔軟な選択肢
- ⚠️ 実際のコストが予想以上に高くなる可能性
- ⚠️ モデルによって料金体系が異なる

#### 利用規約
- APIキーが必要
- 各モデルの利用規約に準拠が必要

#### 推奨度
**⚠️ 条件付き推奨** - コスト計算が複雑で、予想外のコストが発生する可能性がある

---

### 2.5 Anthropic Claude

#### 概要
- **提供元**: Anthropic
- **画像生成機能**: **なし** ❌
- **画像理解機能**: あり（画像を入力として分析・説明）

#### 特徴
- ❌ 画像生成機能なし
- ✅ 画像理解機能あり（画像を入力として分析）

#### 推奨度
**❌ 非推奨（画像生成用途）** - 画像生成機能がないため

---

### 2.6 画像生成AIのコスト比較表

| サービス | 価格/画像（標準） | 月100画像 | 月500画像 | 月1,000画像 | 推奨度 |
|---------|----------------|----------|----------|-----------|--------|
| **OpenAI DALL-E 3** | $0.04 | $4 | $20 | $40 | ✅ |
| **Stability AI (SDXL)** | $0.009 | $0.90 | $4.50 | $9 | ✅ |
| **Google Imagen 4 Fast** | $0.02 | $2 | $10 | $20 | ✅ |
| **Replicate (flux-dev)** | $0.025 | $2.50 | $12.50 | $25 | ⚠️ |
| **Anthropic Claude** | - | - | - | - | ❌ |

---

## 3. 推奨実装方針

### 3.1 Web画像検索

#### 推奨: Google Custom Search API
**理由**:
- ✅ 無料枠が大きい（1日100リクエスト = 月約3,000リクエスト）
- ✅ 公式APIで安定している
- ✅ Googleの検索品質
- ✅ コストが比較的低い（$5/1,000リクエスト）

**実装時の考慮事項**:
- カスタム検索エンジン（CSE）の作成が必要
- 画像検索専用ではないため、結果のフィルタリングが必要

#### 代替: SerpAPI
**理由**:
- ✅ Google画像検索の結果を直接取得できる
- ⚠️ 無料枠が小さい（月250リクエスト）
- ⚠️ スクレイピングベース（Googleの仕様変更に弱い）

**実装時の考慮事項**:
- 無料枠が小さいため、有料プランが必要になる可能性が高い
- Legal US Shieldが含まれるため、利用規約遵守の保証がある

---

### 3.2 画像生成AI

#### 推奨: Stability AI (SDXL 1.0) または Google Imagen 4 Fast
**理由**:
- ✅ 低コスト（$0.009〜$0.02/画像）
- ✅ 高品質
- ✅ 安定したAPI

**実装時の考慮事項**:
- Stability AI: 新規ユーザーに無料クレジット（約25クレジット）あり
- Google Imagen: Google Cloudアカウントが必要（Vertex AI経由の場合）

#### 代替: OpenAI DALL-E 3
**理由**:
- ✅ 最高品質
- ⚠️ コストが比較的高い（$0.04/画像）

**実装時の考慮事項**:
- 品質を最優先する場合に選択
- コストが2〜4倍になることを考慮

---

## 4. コスト試算例

### 4.1 想定使用量

#### ケース1: 小規模（個人利用）
- **画像検索**: 月500リクエスト
- **画像生成**: 月50画像

**コスト**:
- **Google Custom Search**: 500リクエスト - 300無料 = 200有料 = **$1/月**
- **Stability AI (SDXL)**: 50 × $0.009 = **$0.45/月**
- **合計**: **約$1.45/月**

#### ケース2: 中規模（チーム利用）
- **画像検索**: 月3,000リクエスト
- **画像生成**: 月200画像

**コスト**:
- **Google Custom Search**: 3,000リクエスト - 3,000無料 = **$0/月**
- **Stability AI (SDXL)**: 200 × $0.009 = **$1.80/月**
- **合計**: **約$1.80/月**

#### ケース3: 大規模（組織利用）
- **画像検索**: 月10,000リクエスト
- **画像生成**: 月1,000画像

**コスト**:
- **Google Custom Search**: 10,000リクエスト - 3,000無料 = 7,000有料 = **$35/月**
- **Stability AI (SDXL)**: 1,000 × $0.009 = **$9/月**
- **合計**: **約$44/月**

---

## 5. 実装時の技術的考慮事項

### 5.1 Cloudflare Workersの制約
- **実行時間**: 最大30秒（無料プラン）または50秒（有料プラン）
- **メモリ**: 128MB
- **考慮事項**: 
  - 画像生成は時間がかかる可能性があるため、非同期処理を検討
  - 画像のダウンロードは避ける（URLのみ返す）

### 5.2 APIキーの管理
- 環境変数として管理
- Cloudflare Workersの環境変数機能を活用

### 5.3 エラーハンドリング
- レート制限の処理
- タイムアウトの処理
- フォールバック戦略（複数のソースを試行）

---

## 6. 次のステップ

### 6.1 実装優先順位

1. **Web画像検索の実装**
   - Google Custom Search APIの統合
   - カスタム検索エンジン（CSE）の作成
   - 画像結果のフィルタリング

2. **画像生成AIの実装**
   - Stability AIまたはGoogle Imagenの統合
   - プロンプト生成ロジックの実装
   - 生成画像の保存処理

### 6.2 検討事項

- **画像生成のプロンプト**: ページタイトルから適切なプロンプトを生成する方法
- **画像の品質**: どの品質設定を使用するか
- **キャッシュ**: 同じクエリで生成された画像をキャッシュするか
- **レート制限**: ユーザーごとの使用量制限

---

## 7. 参考資料

- **Bing Image Search API**: https://www.microsoft.com/en-us/bing/apis/pricing
- **Google Custom Search API**: https://developers.google.com/custom-search/v1/overview
- **SerpAPI**: https://serpapi.com/pricing
- **OpenAI DALL-E**: https://platform.openai.com/docs/models/dall-e-3
- **Stability AI**: https://stability.ai/api-pricing
- **Google Imagen**: https://ai.google.dev/pricing
- **Replicate**: https://replicate.com/pricing
