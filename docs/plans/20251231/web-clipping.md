# å®Ÿè£…è¨ˆç”»æ›¸: Web Clippingï¼ˆURL å–ã‚Šè¾¼ã¿æ©Ÿèƒ½ï¼‰

## æ¦‚è¦

| é …ç›®       | å†…å®¹                                                              |
| :--------- | :---------------------------------------------------------------- |
| **æ©Ÿèƒ½å** | Web Clippingï¼ˆURL å–ã‚Šè¾¼ã¿æ©Ÿèƒ½ï¼‰                                  |
| **ç›®çš„**   | URL ã‹ã‚‰ Web ãƒšãƒ¼ã‚¸ã®æœ¬æ–‡ã‚’æŠ½å‡ºã—ã€ç·¨é›†å¯èƒ½ãªãƒšãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜ã™ã‚‹ |
| **å„ªå…ˆåº¦** | ğŸ”´ å¿…é ˆï¼ˆPhase 3 ã®ã‚³ã‚¢æ©Ÿèƒ½ï¼‰                                     |
| **ä¾å­˜**   | ãªã—                                                              |

---

## æ©Ÿèƒ½è¦ä»¶

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆç”»é¢ã‚’é–‹ã
2. ã€ŒURL ã‹ã‚‰å–ã‚Šè¾¼ã¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯ URL ã‚’ç›´æ¥ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹
3. ã‚·ã‚¹ãƒ†ãƒ ãŒ Web ãƒšãƒ¼ã‚¸ã®æœ¬æ–‡ã‚’æŠ½å‡ºã™ã‚‹ï¼ˆReader Modeï¼‰
4. æŠ½å‡ºã•ã‚ŒãŸå†…å®¹ãŒã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥ã•ã‚Œã‚‹
5. ã‚¿ã‚¤ãƒˆãƒ«ã¯ OGP ã¾ãŸã¯ `<title>` ã‚¿ã‚°ã‹ã‚‰è‡ªå‹•å–å¾—ã•ã‚Œã‚‹
6. å¼•ç”¨å…ƒ URL ã¯ `source_url` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜ã•ã‚Œã‚‹
7. Date Grid ã§ã¯ã‚¯ãƒªãƒƒãƒ—ã—ãŸãƒšãƒ¼ã‚¸ã‚’è¦–è¦šçš„ã«åŒºåˆ¥è¡¨ç¤ºã™ã‚‹

### æŠ½å‡ºå¯¾è±¡

| è¦ç´            | æŠ½å‡ºæ–¹æ³•                                    |
| :------------- | :------------------------------------------ |
| **ã‚¿ã‚¤ãƒˆãƒ«**   | OGP `og:title` > `<title>` ã‚¿ã‚°             |
| **æœ¬æ–‡**       | Readability.js ã«ã‚ˆã‚‹æœ¬æ–‡æŠ½å‡º               |
| **ã‚µãƒ ãƒã‚¤ãƒ«** | OGP `og:image`                              |
| **èª¬æ˜**       | OGP `og:description` > `<meta description>` |
| **å¼•ç”¨å…ƒ URL** | å…¥åŠ›ã•ã‚ŒãŸ URL ã‚’ãã®ã¾ã¾ä¿å­˜               |

---

## UI è¨­è¨ˆ

### ãƒˆãƒªã‚¬ãƒ¼æ–¹æ³•

1. **æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆç”»é¢**: ã€ŒğŸ”— URL ã‹ã‚‰å–ã‚Šè¾¼ã¿ã€ãƒœã‚¿ãƒ³
2. **URL ãƒšãƒ¼ã‚¹ãƒˆæ¤œçŸ¥**: ã‚¨ãƒ‡ã‚£ã‚¿ã« URL ã‚’ãƒšãƒ¼ã‚¹ãƒˆã—ãŸéš›ã«è‡ªå‹•ææ¡ˆ

### æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† æ–°è¦ãƒšãƒ¼ã‚¸                                    [ä¿å­˜]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ âœ¨ Wiki ç”Ÿæˆ          â”‚ â”‚ ğŸ”— URL ã‹ã‚‰å–ã‚Šè¾¼ã¿  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  ã‚¿ã‚¤ãƒˆãƒ«                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                             â”‚
â”‚  [ã‚¨ãƒ‡ã‚£ã‚¿é ˜åŸŸ]                                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### URL å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ğŸ”— URL ã‹ã‚‰å–ã‚Šè¾¼ã¿                                  [Ã—]   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ https://example.com/article/...                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¡ Web ãƒšãƒ¼ã‚¸ã®æœ¬æ–‡ã‚’æŠ½å‡ºã—ã¦ãƒšãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚       â”‚
â”‚     å¼•ç”¨å…ƒ URL ã¯è‡ªå‹•çš„ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚                     â”‚
â”‚                                                             â”‚
â”‚                              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [å–ã‚Šè¾¼ã¿]       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å–ã‚Šè¾¼ã¿ä¸­ã®è¡¨ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â³ å–ã‚Šè¾¼ã¿ä¸­...                                           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“„ ãƒšãƒ¼ã‚¸ã‚’å–å¾—ä¸­...                               â”‚   â”‚
â”‚  â”‚  â””â”€ ğŸ” æœ¬æ–‡ã‚’æŠ½å‡ºä¸­...                              â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Date Grid ã§ã®è¡¨ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”—       â”‚  â† ã‚¯ãƒªãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ã¯ğŸ”—ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤º
â”‚ [thumb]  â”‚
â”‚ è¨˜äº‹ã‚¿ã‚¤ â”‚
â”‚ ãƒˆãƒ«...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒšãƒ¼ã‚¸ã‚¨ãƒ‡ã‚£ã‚¿ã§ã®å¼•ç”¨å…ƒè¡¨ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† æ©Ÿæ¢°å­¦ç¿’å…¥é–€ã‚¬ã‚¤ãƒ‰                            [â‹¯]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ”— å¼•ç”¨å…ƒ: https://example.com/ml-guide  [é–‹ã]           â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                             â”‚
â”‚  [æœ¬æ–‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„]                                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€è¡“è¨­è¨ˆ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

Web ãƒšãƒ¼ã‚¸ã®å–å¾—ã¯ CORS ã®åˆ¶ç´„ãŒã‚ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚ --> â”‚  CORS Proxy  â”‚ --> â”‚  Target URL  â”‚
â”‚   (Client)   â”‚     â”‚  or Backend  â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ–¹å¼ A: CORS ãƒ—ãƒ­ã‚­ã‚·ï¼ˆWeb App ç”¨ï¼‰

```typescript
// lib/webClipper.ts
const CORS_PROXY = "https://api.allorigins.win/raw?url=";

async function fetchWithProxy(url: string): Promise<string> {
  const response = await fetch(CORS_PROXY + encodeURIComponent(url));
  if (!response.ok) {
    throw new Error("ãƒšãƒ¼ã‚¸ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");
  }
  return response.text();
}
```

#### æ–¹å¼ B: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ï¼ˆæ¨å¥¨ï¼‰

Vercel Edge Functions ã‚„ Cloudflare Workers ã‚’ä½¿ç”¨ï¼š

```typescript
// api/fetch-page.ts (Vercel Edge Function)
export default async function handler(req: Request) {
  const url = new URL(req.url).searchParams.get("url");
  if (!url) {
    return new Response("URL is required", { status: 400 });
  }

  const response = await fetch(url, {
    headers: {
      "User-Agent": "Mozilla/5.0 (compatible; ZediBot/1.0)",
    },
  });

  const html = await response.text();
  return new Response(html, {
    headers: {
      "Content-Type": "text/html",
      "Access-Control-Allow-Origin": "*",
    },
  });
}
```

### æœ¬æ–‡æŠ½å‡ºï¼ˆReadability.jsï¼‰

```typescript
// lib/webClipper.ts
import { Readability } from "@mozilla/readability";

export interface ClippedContent {
  title: string;
  content: string; // HTML å½¢å¼
  textContent: string; // ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
  excerpt: string; // è¦ç´„
  byline: string | null; // è‘—è€…
  siteName: string | null; // ã‚µã‚¤ãƒˆå
  thumbnailUrl: string | null;
  sourceUrl: string;
}

export async function clipWebPage(url: string): Promise<ClippedContent> {
  // 1. HTML ã‚’å–å¾—
  const html = await fetchWithProxy(url);

  // 2. DOM ã‚’ãƒ‘ãƒ¼ã‚¹
  const parser = new DOMParser();
  const doc = parser.parseFromString(html, "text/html");

  // 3. OGP æƒ…å ±ã‚’æŠ½å‡º
  const ogTitle = doc
    .querySelector('meta[property="og:title"]')
    ?.getAttribute("content");
  const ogImage = doc
    .querySelector('meta[property="og:image"]')
    ?.getAttribute("content");
  const ogDescription = doc
    .querySelector('meta[property="og:description"]')
    ?.getAttribute("content");

  // 4. Readability ã§æœ¬æ–‡æŠ½å‡º
  const reader = new Readability(doc);
  const article = reader.parse();

  if (!article) {
    throw new Error("æœ¬æ–‡ã®æŠ½å‡ºã«å¤±æ•—ã—ã¾ã—ãŸ");
  }

  return {
    title: ogTitle || article.title || doc.title || "ç„¡é¡Œ",
    content: article.content,
    textContent: article.textContent,
    excerpt: ogDescription || article.excerpt || "",
    byline: article.byline,
    siteName: article.siteName,
    thumbnailUrl: ogImage || null,
    sourceUrl: url,
  };
}
```

### HTML â†’ Tiptap å¤‰æ›

```typescript
// lib/htmlToTiptap.ts
import { generateJSON } from "@tiptap/html";
import StarterKit from "@tiptap/starter-kit";

export function htmlToTiptapJSON(html: string): object {
  // ä¸è¦ãªã‚¿ã‚°ã‚’é™¤å»
  const cleanHtml = sanitizeHtml(html);

  // Tiptap JSON ã«å¤‰æ›
  return generateJSON(cleanHtml, [StarterKit]);
}

function sanitizeHtml(html: string): string {
  // script, style, iframe ç­‰ã‚’é™¤å»
  const div = document.createElement("div");
  div.innerHTML = html;

  // ä¸è¦ãªè¦ç´ ã‚’å‰Šé™¤
  const unwanted = div.querySelectorAll("script, style, iframe, noscript");
  unwanted.forEach((el) => el.remove());

  return div.innerHTML;
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜

```typescript
// hooks/useWebClipper.ts
import { useMutation, useQueryClient } from "@tanstack/react-query";
import { clipWebPage } from "@/lib/webClipper";
import { htmlToTiptapJSON } from "@/lib/htmlToTiptap";
import { useCreatePage } from "./usePageQueries";

export function useWebClipper() {
  const createPage = useCreatePage();
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (url: string) => {
      // 1. Web ãƒšãƒ¼ã‚¸ã‚’å–ã‚Šè¾¼ã¿
      const clipped = await clipWebPage(url);

      // 2. HTML ã‚’ Tiptap JSON ã«å¤‰æ›
      const tiptapContent = htmlToTiptapJSON(clipped.content);

      // 3. ãƒšãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜
      const page = await createPage.mutateAsync({
        title: clipped.title,
        content: JSON.stringify(tiptapContent),
        sourceUrl: clipped.sourceUrl,
        thumbnailUrl: clipped.thumbnailUrl,
      });

      return page;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["pages"] });
    },
  });
}
```

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ webClipper.ts             # Webå–ã‚Šè¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ htmlToTiptap.ts           # HTMLâ†’Tiptapå¤‰æ›ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useWebClipper.ts          # Webå–ã‚Šè¾¼ã¿ãƒ•ãƒƒã‚¯ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”œâ”€â”€ WebClipperButton.tsx  # å–ã‚Šè¾¼ã¿ãƒœã‚¿ãƒ³ï¼ˆæ–°è¦ï¼‰
â”‚   â”‚   â””â”€â”€ SourceUrlBadge.tsx    # å¼•ç”¨å…ƒè¡¨ç¤ºï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ page/
â”‚       â””â”€â”€ PageCard.tsx          # ã‚¯ãƒªãƒƒãƒ—ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ ï¼ˆä¿®æ­£ï¼‰
â””â”€â”€ types/
    â””â”€â”€ page.ts                   # sourceUrl ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆä¿®æ­£ï¼‰
```

---

## å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

| Step | å†…å®¹                                   | è¦‹ç©ã‚‚ã‚Š |
| :--- | :------------------------------------- | :------- |
| 1    | CORS ãƒ—ãƒ­ã‚­ã‚·ã¾ãŸã¯ Edge Function è¨­å®š | 1 æ™‚é–“   |
| 2    | Readability.js ã«ã‚ˆã‚‹æœ¬æ–‡æŠ½å‡º          | 1.5 æ™‚é–“ |
| 3    | OGP æƒ…å ±æŠ½å‡º                           | 30 åˆ†    |
| 4    | HTML â†’ Tiptap JSON å¤‰æ›                | 1.5 æ™‚é–“ |
| 5    | URL å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚° UI                  | 1 æ™‚é–“   |
| 6    | Web Clipper ãƒ•ãƒƒã‚¯                     | 1 æ™‚é–“   |
| 7    | ã‚¨ãƒ‡ã‚£ã‚¿ã¸ã®çµ±åˆ                       | 1 æ™‚é–“   |
| 8    | å¼•ç”¨å…ƒ URL è¡¨ç¤º UI                     | 30 åˆ†    |
| 9    | Date Grid ã§ã®ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º             | 30 åˆ†    |
| 10   | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°                     | 1 æ™‚é–“   |
| 11   | ãƒ†ã‚¹ãƒˆã¨èª¿æ•´                           | 1.5 æ™‚é–“ |

**åˆè¨ˆè¦‹ç©ã‚‚ã‚Š: ç´„ 11 æ™‚é–“**

---

## ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```bash
bun add @mozilla/readability
```

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

| ã‚¨ãƒ©ãƒ¼             | è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸                                                             |
| :----------------- | :------------------------------------------------------------------------- |
| ç„¡åŠ¹ãª URL         | ã€Œæœ‰åŠ¹ãª URL ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã€                                        |
| ãƒšãƒ¼ã‚¸å–å¾—å¤±æ•—     | ã€Œãƒšãƒ¼ã‚¸ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚URL ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã€                   |
| æœ¬æ–‡æŠ½å‡ºå¤±æ•—       | ã€Œæœ¬æ–‡ã®æŠ½å‡ºã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã“ã®ãƒšãƒ¼ã‚¸ã¯å¯¾å¿œã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã€ |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ | ã€Œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã€             |
| ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ       | ã€Œãƒšãƒ¼ã‚¸ã®å–å¾—ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚ã€               |

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **XSS å¯¾ç­–**: HTML ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã‚’å¾¹åº•ï¼ˆscript, style, iframe é™¤å»ï¼‰
2. **URL æ¤œè¨¼**: æœ‰åŠ¹ãª HTTP/HTTPS URL ã®ã¿è¨±å¯
3. **ãƒ—ãƒ­ã‚­ã‚·åˆ¶é™**: ä¿¡é ¼ã§ãã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹
4. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: é€£ç¶šå–ã‚Šè¾¼ã¿ã®åˆ¶é™ã‚’è¨­ã‘ã‚‹

---

## å°†æ¥ã®æ‹¡å¼µ

1. **ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½**: Chrome/Firefox æ‹¡å¼µã§ç›´æ¥å–ã‚Šè¾¼ã¿
2. **é¸æŠãƒ†ã‚­ã‚¹ãƒˆã‚¯ãƒªãƒƒãƒ—**: Web ãƒšãƒ¼ã‚¸ã®ä¸€éƒ¨ã®ã¿ã‚’å–ã‚Šè¾¼ã¿
3. **PDF å¯¾å¿œ**: PDF URL ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
4. **YouTube å¯¾å¿œ**: å‹•ç”»ã®èª¬æ˜æ–‡ã‚„å­—å¹•ã‚’å–ã‚Šè¾¼ã¿

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [PRD: 2.4.1 Web ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°æ©Ÿèƒ½](../PRD.md#241-web-ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°æ©Ÿèƒ½æ¤œè¨ä¸­)
